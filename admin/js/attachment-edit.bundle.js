(()=>{(function(i){"use strict";var o=!1;i(document).ready(function(){i("#optipress-meta-box-content").on("click",".optipress-convert-image",function(a){if(a.preventDefault(),!o){var t=i(this),e=i("#optipress-meta-box-content").data("attachment-id"),n=i('input[name="optipress_format"]:checked').val();if(!n){alert(optipressAttachment.i18n.error+": No format selected.");return}f(e,n)}}),i("#optipress-meta-box-content").on("click",".optipress-revert-image",function(a){if(a.preventDefault(),!o&&confirm(optipressAttachment.i18n.confirmRevert)){var t=i("#optipress-meta-box-content").data("attachment-id");d(t)}}),i("#optipress-meta-box-content").on("click",".optipress-switch-format",function(a){if(a.preventDefault(),!o){var t=i(this),e=i("#optipress-meta-box-content").data("attachment-id"),n=t.data("format");u(e,n)}})});function f(a,t){o=!0,c(optipressAttachment.i18n.converting),i.ajax({url:optipressAttachment.ajaxUrl,type:"POST",data:{action:"optipress_convert_single_image",nonce:optipressAttachment.nonce,attachment_id:a,format:t},success:function(e){if(o=!1,e.success)r(e.data.message,"success"),e.data.html&&i("#optipress-meta-box-content").html(e.data.html),m(a),setTimeout(function(){location.reload()},2e3);else{var n=e.data&&e.data.message?e.data.message:optipressAttachment.i18n.unknownError;r(optipressAttachment.i18n.conversionError+" "+n,"error"),s()}},error:function(e,n,p){o=!1,r(optipressAttachment.i18n.error+": "+p,"error"),s()}})}function d(a){o=!0,c(optipressAttachment.i18n.reverting),i.ajax({url:optipressAttachment.ajaxUrl,type:"POST",data:{action:"optipress_revert_single_image",nonce:optipressAttachment.nonce,attachment_id:a},success:function(t){if(o=!1,t.success)r(t.data.message,"success"),t.data.html&&i("#optipress-meta-box-content").html(t.data.html),m(a),setTimeout(function(){location.reload()},2e3);else{var e=t.data&&t.data.message?t.data.message:optipressAttachment.i18n.unknownError;r(e,"error"),s()}},error:function(t,e,n){o=!1,r(optipressAttachment.i18n.error+": "+n,"error"),s()}})}function u(a,t){o=!0,c(optipressAttachment.i18n.switching),i.ajax({url:optipressAttachment.ajaxUrl,type:"POST",data:{action:"optipress_switch_format",nonce:optipressAttachment.nonce,attachment_id:a,format:t},success:function(e){if(o=!1,e.success)r(e.data.message,"success"),e.data.html&&i("#optipress-meta-box-content").html(e.data.html),m(a),setTimeout(function(){location.reload()},2e3);else{var n=e.data&&e.data.message?e.data.message:optipressAttachment.i18n.unknownError;r(optipressAttachment.i18n.conversionError+" "+n,"error"),s()}},error:function(e,n,p){o=!1,r(optipressAttachment.i18n.error+": "+p,"error"),s()}})}function c(a){var t=i("#optipress-meta-box-content");t.find(".optipress-status-display").hide(),t.find(".optipress-loading").show(),a&&t.find(".optipress-loading-text").text(a)}function s(){var a=i("#optipress-meta-box-content");a.find(".optipress-loading").hide(),a.find(".optipress-status-display").show()}function r(a,t){var e="notice notice-"+t+" is-dismissible",n=i('<div class="'+e+'"><p>'+a+"</p></div>");i(".wrap h1").first().after(n),typeof wp!="undefined"&&wp.notices&&n.find(".notice-dismiss").on("click",function(){n.fadeTo(100,0,function(){n.slideUp(100,function(){n.remove()})})}),t==="success"&&setTimeout(function(){n.fadeTo(300,0,function(){n.slideUp(200,function(){n.remove()})})},5e3),i("html, body").animate({scrollTop:0},300)}function m(a){if(typeof wp!="undefined"&&wp.media&&wp.media.frame){var t=wp.media.attachment(a);t&&t.fetch()}}})(jQuery);})();
//# sourceMappingURL=attachment-edit.bundle.js.map
