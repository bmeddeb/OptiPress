{
  "version": 3,
  "sources": ["../../src/js/admin-settings.js"],
  "sourcesContent": ["/**\n * OptiPress Admin Settings JavaScript\n *\n * @package OptiPress\n */\n\n(function ($) {\n\t'use strict';\n\n\t/**\n\t * Initialize admin settings functionality\n\t */\n\t$(document).ready(function () {\n\t\t// Initialize quality slider\n\t\tinitQualitySlider();\n\n\t\t// Initialize compatibility checker (only if on optimization tab)\n\t\tif ($('#optipress_engine').length) {\n\t\t\tinitCompatibilityChecker();\n\t\t}\n\n\t\t// Confirm before disabling \"Keep Originals\"\n\t\tinitKeepOriginalsWarning();\n\t});\n\n\t/**\n\t * Initialize quality slider\n\t */\n\tfunction initQualitySlider() {\n\t\tconst $slider = $('#optipress_quality');\n\t\tconst $display = $('#optipress-quality-value');\n\n\t\tif (!$slider.length || !$display.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Update display on slider change\n\t\t$slider.on('input', function () {\n\t\t\t$display.text($(this).val());\n\t\t});\n\t}\n\n\t/**\n\t * Initialize compatibility checker\n\t */\n\tfunction initCompatibilityChecker() {\n\t\tconst $engine = $('#optipress_engine');\n\t\tconst $format = $('#optipress_format');\n\t\tconst $status = $('#optipress-compatibility-status');\n\n\t\tif (!$engine.length || !$format.length || !$status.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * Check engine/format compatibility via AJAX\n\t\t */\n\t\tfunction checkCompatibility() {\n\t\t\tconst engine = $engine.val();\n\t\t\tconst format = $format.val();\n\n\t\t\t// Show loading spinner\n\t\t\t$status.html('<span class=\"spinner is-active\" style=\"float: none; margin: 0;\"></span>');\n\n\t\t\t// AJAX request\n\t\t\t$.ajax({\n\t\t\t\turl: optipressAdmin.ajaxUrl,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'optipress_check_compatibility',\n\t\t\t\t\tnonce: optipressAdmin.nonce,\n\t\t\t\t\tengine: engine,\n\t\t\t\t\tformat: format,\n\t\t\t\t},\n\t\t\t\tsuccess: function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$status.html(\n\t\t\t\t\t\t\t'<span class=\"optipress-status-success\">\u2713 ' +\n\t\t\t\t\t\t\t\tresponse.data.message +\n\t\t\t\t\t\t\t\t'</span>'\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$status.html(\n\t\t\t\t\t\t\t'<span class=\"optipress-status-error\">\u2717 ' +\n\t\t\t\t\t\t\t\tresponse.data.message +\n\t\t\t\t\t\t\t\t'</span>'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function () {\n\t\t\t\t\t$status.html(\n\t\t\t\t\t\t'<span class=\"optipress-status-error\">\u2717 ' +\n\t\t\t\t\t\t\t'Failed to check compatibility' +\n\t\t\t\t\t\t\t'</span>'\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\t// Check on change\n\t\t$engine.on('change', checkCompatibility);\n\t\t$format.on('change', checkCompatibility);\n\n\t\t// Check on page load\n\t\tcheckCompatibility();\n\t}\n\n\t/**\n\t * Initialize \"Keep Originals\" warning\n\t */\n\tfunction initKeepOriginalsWarning() {\n\t\tconst $checkbox = $('input[name=\"optipress_options[keep_originals]\"]');\n\n\t\tif (!$checkbox.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t$checkbox.on('change', function () {\n\t\t\tif (!$(this).is(':checked')) {\n\t\t\t\tvar message =\n\t\t\t\t\t'Warning: Disabling \"Keep Originals\" will permanently delete original image files after conversion.\\n\\n' +\n\t\t\t\t\t'This cannot be undone, and you will not be able to revert conversions.\\n\\n' +\n\t\t\t\t\t'Are you sure you want to disable this option?';\n\n\t\t\t\t// Use OptipressNotices.createConfirm if available (non-blocking), fallback to window.confirm\n\t\t\t\tOptipressNotices.createConfirm(message, {\n\t\t\t\t\tconfirmLabel: 'Disable',\n\t\t\t\t\tcancelLabel: 'Keep Originals',\n\t\t\t\t}).then(function (confirmed) {\n\t\t\t\t\tif (!confirmed) {\n\t\t\t\t\t\t$('input[name=\"optipress_options[keep_originals]\"]').prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n})(jQuery);\n"],
  "mappings": "OAMC,SAAUA,EAAG,CACb,aAKAA,EAAE,QAAQ,EAAE,MAAM,UAAY,CAE7BC,EAAkB,EAGdD,EAAE,mBAAmB,EAAE,QAC1BE,EAAyB,EAI1BC,EAAyB,CAC1B,CAAC,EAKD,SAASF,GAAoB,CAC5B,IAAMG,EAAUJ,EAAE,oBAAoB,EAChCK,EAAWL,EAAE,0BAA0B,EAEzC,CAACI,EAAQ,QAAU,CAACC,EAAS,QAKjCD,EAAQ,GAAG,QAAS,UAAY,CAC/BC,EAAS,KAAKL,EAAE,IAAI,EAAE,IAAI,CAAC,CAC5B,CAAC,CACF,CAKA,SAASE,GAA2B,CACnC,IAAMI,EAAUN,EAAE,mBAAmB,EAC/BO,EAAUP,EAAE,mBAAmB,EAC/BQ,EAAUR,EAAE,iCAAiC,EAEnD,GAAI,CAACM,EAAQ,QAAU,CAACC,EAAQ,QAAU,CAACC,EAAQ,OAClD,OAMD,SAASC,GAAqB,CAC7B,IAAMC,EAASJ,EAAQ,IAAI,EACrBK,EAASJ,EAAQ,IAAI,EAG3BC,EAAQ,KAAK,yEAAyE,EAGtFR,EAAE,KAAK,CACN,IAAK,eAAe,QACpB,KAAM,OACN,KAAM,CACL,OAAQ,gCACR,MAAO,eAAe,MACtB,OAAQU,EACR,OAAQC,CACT,EACA,QAAS,SAAUC,EAAU,CACxBA,EAAS,QACZJ,EAAQ,KACP,iDACCI,EAAS,KAAK,QACd,SACF,EAEAJ,EAAQ,KACP,+CACCI,EAAS,KAAK,QACd,SACF,CAEF,EACA,MAAO,UAAY,CAClBJ,EAAQ,KACP,kFAGD,CACD,CACD,CAAC,CACF,CAGAF,EAAQ,GAAG,SAAUG,CAAkB,EACvCF,EAAQ,GAAG,SAAUE,CAAkB,EAGvCA,EAAmB,CACpB,CAKA,SAASN,GAA2B,CACnC,IAAMU,EAAYb,EAAE,iDAAiD,EAEhEa,EAAU,QAIfA,EAAU,GAAG,SAAU,UAAY,CAClC,GAAI,CAACb,EAAE,IAAI,EAAE,GAAG,UAAU,EAAG,CAC5B,IAAIc,EACH;AAAA;AAAA;AAAA;AAAA,+CAKD,iBAAiB,cAAcA,EAAS,CACvC,aAAc,UACd,YAAa,gBACd,CAAC,EAAE,KAAK,SAAUC,EAAW,CACvBA,GACJf,EAAE,iDAAiD,EAAE,KAAK,UAAW,EAAI,CAE3E,CAAC,CACF,CACD,CAAC,CACF,CACD,GAAG,MAAM",
  "names": ["$", "initQualitySlider", "initCompatibilityChecker", "initKeepOriginalsWarning", "$slider", "$display", "$engine", "$format", "$status", "checkCompatibility", "engine", "format", "response", "$checkbox", "message", "confirmed"]
}
